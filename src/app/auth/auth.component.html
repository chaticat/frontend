<body>
<div class="auth-container" [ngClass]="{'sign-up-mode':openSignUp}">
  <div class="forms-container">
    <div class="signin-signup">

      <form action="#" class="sign-in-form" [formGroup]="loginForm">
        <h2 class="title">Sign in</h2>

        <div class="input-field"
             [ngClass]="{'input-field-invalid' : loginUsername && loginUsername.invalid && (loginUsername.dirty || loginUsername.touched)}">
          <i class="fas fa-user"></i>
          <input autocomplete="on" type="text" placeholder="Username" formControlName="username" required/>
        </div>
        <div *ngIf="loginUsername.invalid && (loginUsername.dirty || loginUsername.touched)"
             class="validation-error-message">
          <div *ngIf="loginUsername.errors?.['required']">
            Username is required
          </div>
          <div *ngIf="loginUsername.errors?.['minlength']">
            Username must be at least 4 characters long
          </div>
        </div>

        <div class="input-field"
             [ngClass]="{'input-field-invalid' : loginPassword.invalid && (loginPassword.dirty || loginPassword.touched)}">
          <i class="fas fa-lock"></i>
          <input autocomplete="on" type="password" placeholder="Password" formControlName="password" required/>
        </div>
        <div *ngIf="loginPassword.invalid && (loginPassword.dirty || loginPassword.touched)"
             class="validation-error-message">
          <div *ngIf="loginPassword.errors?.['required']">
            Password is required
          </div>
          <div *ngIf="loginPassword.errors?.['minlength']">
            Password must be at least 4 characters long
          </div>
          <div *ngIf="loginPassword.errors?.['maxlength']">
            Password must be not more then 30 characters long
          </div>
        </div>

        <input autocomplete="on" type="submit" value="Login" class="btn solid" (click)="login()"/>
      </form>

      <form action="#" class="sign-up-form" [formGroup]="registerForm">
        <h2 class="title">Sign up</h2>

        <div class="input-field" id="username"
             [ngClass]="{'input-field-invalid' : registerUsername.invalid && (registerUsername.dirty || registerUsername.touched)}">
          <i class="fas fa-user"></i>
          <input autocomplete="on" type="text" placeholder="Username" formControlName="username">
        </div>
        <div *ngIf="registerUsername.invalid && (registerUsername.dirty || registerUsername.touched)"
             class="validation-error-message">
          <div *ngIf="registerUsername.errors?.['required']">
            Username is required
          </div>
          <div *ngIf="registerUsername.errors?.['minlength']">
            Username must be at least 4 characters long
          </div>
          <div *ngIf="registerUsername.errors?.['maxlength']">
            Username must be not more then 15 characters long
          </div>
          <div *ngIf="registerUsername.errors?.['usernameExists']">
            This username is already taken
          </div>
        </div>
        <div class="validation-error-message">{{usernameIsTaken}}</div>

        <div class="input-field"
             [ngClass]="{'input-field-invalid' : registerPassword.invalid && (registerPassword.dirty || registerPassword.touched)}">
          <i class="fas fa-lock"></i>
          <input autocomplete="on" type="password" placeholder="Password" formControlName="password"/>
        </div>
        <div *ngIf="registerPassword.invalid && (registerPassword.dirty || registerPassword.touched)"
             class="validation-error-message">
          <div *ngIf="registerPassword.errors?.['required']">
            Password is required
          </div>
          <div *ngIf="registerPassword.errors?.['minlength']">
            Password must be at least 4 characters long
          </div>
          <div *ngIf="registerPassword.errors?.['maxlength']">
            Password must be not more then 30 characters long
          </div>
        </div>

        <div class="input-field"
             [ngClass]="{'input-field-invalid' : registerConfirmPassword.invalid && (registerConfirmPassword.dirty || registerConfirmPassword.touched)}">
          <i class="fas fa-lock"></i>
          <input autocomplete="on" type="password" placeholder="Confirm password" formControlName="confirmPassword"/>
        </div>
        <div
          *ngIf="registerConfirmPassword.invalid && (registerConfirmPassword.dirty || registerConfirmPassword.touched)"
          class="validation-error-message">
          <div *ngIf="registerConfirmPassword.errors?.['required']">
            Confirm password is required
          </div>
        </div>
        <div class="validation-error-message"
             *ngIf="registerConfirmPassword.valid && registerConfirmPassword.value != registerPassword.value">
          Password and confirm password are mismatched
        </div>

        <input autocomplete="on" type="submit" class="btn" value="Sign up" (click)="register()"/>

      </form>
    </div>
  </div>

  <div class="panels-container">
    <div class="panel left-panel">
      <div class="content">
        <h3>New here ?</h3>
        <p>
          Let's start chatting
        </p>
        <button class="btn transparent" id="sign-up-btn" (click)="openSignUpTab()">
          Sign up
        </button>
      </div>
      <img src="/assets/images/login.svg" class="image" alt=""/>
    </div>
    <div class="panel right-panel">
      <div class="content">
        <h3>One of us ?</h3>
        <p>
          Let's continue chatting
        </p>
        <button class="btn transparent" id="sign-in-btn" (click)="openSignInTab()">
          Sign in
        </button>
      </div>
      <img src="/assets/images/register.svg" class="image" alt=""/>
    </div>
  </div>
</div>
